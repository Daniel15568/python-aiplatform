

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>google.cloud.aiplatform.utils &#8212; google-cloud-aiplatform  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/alabaster.css" />
    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>

  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
          	<div class="admonition" id="python2-eol"> 
          	 As of January 1, 2020 this library no longer supports Python 2 on the latest released version. 
          	 Library versions released prior to that date will continue to be available. For more information please
          	 visit <a href="https://cloud.google.com/python/docs/python2-sunset/">Python 2 support on Google Cloud</a>.
          	</div>
            
  <h1>Source code for google.cloud.aiplatform.utils</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1"># Copyright 2023 Google LLC</span>
<span class="c1">#</span>
<span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="c1"># you may not use this file except in compliance with the License.</span>
<span class="c1"># You may obtain a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#     http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1"># See the License for the specific language governing permissions and</span>
<span class="c1"># limitations under the License.</span>
<span class="c1">#</span>


<span class="kn">import</span> <span class="nn">abc</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">pathlib</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Type</span><span class="p">,</span> <span class="n">TypeVar</span><span class="p">,</span> <span class="n">Tuple</span>
<span class="kn">import</span> <span class="nn">uuid</span>

<span class="kn">from</span> <span class="nn">google.protobuf</span> <span class="kn">import</span> <span class="n">timestamp_pb2</span>

<span class="kn">from</span> <span class="nn">google.api_core</span> <span class="kn">import</span> <span class="n">client_options</span>
<span class="kn">from</span> <span class="nn">google.api_core</span> <span class="kn">import</span> <span class="n">gapic_v1</span>
<span class="kn">from</span> <span class="nn">google.auth</span> <span class="kn">import</span> <span class="n">credentials</span> <span class="k">as</span> <span class="n">auth_credentials</span>
<span class="kn">from</span> <span class="nn">google.cloud</span> <span class="kn">import</span> <span class="n">storage</span>

<span class="kn">from</span> <span class="nn">google.cloud.aiplatform</span> <span class="kn">import</span> <span class="n">compat</span>
<span class="kn">from</span> <span class="nn">google.cloud.aiplatform.constants</span> <span class="kn">import</span> <span class="n">base</span> <span class="k">as</span> <span class="n">constants</span>
<span class="kn">from</span> <span class="nn">google.cloud.aiplatform</span> <span class="kn">import</span> <span class="n">initializer</span>

<span class="kn">from</span> <span class="nn">google.cloud.aiplatform.compat.services</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">dataset_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">deployment_resource_pool_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">endpoint_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">extension_execution_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">extension_registry_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">feature_online_store_admin_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">feature_online_store_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">featurestore_online_serving_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">featurestore_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">index_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">index_endpoint_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">job_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">match_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">metadata_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">model_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">model_monitoring_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">pipeline_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">prediction_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">prediction_service_async_client_v1beta1</span><span class="p">,</span>
    <span class="n">schedule_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">tensorboard_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">vizier_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">model_garden_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">persistent_resource_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">reasoning_engine_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">reasoning_engine_execution_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">vertex_rag_data_service_async_client_v1beta1</span><span class="p">,</span>
    <span class="n">vertex_rag_data_service_client_v1beta1</span><span class="p">,</span>
    <span class="n">vertex_rag_service_client_v1beta1</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">google.cloud.aiplatform.compat.services</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">dataset_service_client_v1</span><span class="p">,</span>
    <span class="n">endpoint_service_client_v1</span><span class="p">,</span>
    <span class="n">feature_online_store_admin_service_client_v1</span><span class="p">,</span>
    <span class="n">feature_online_store_service_client_v1</span><span class="p">,</span>
    <span class="n">featurestore_online_serving_service_client_v1</span><span class="p">,</span>
    <span class="n">featurestore_service_client_v1</span><span class="p">,</span>
    <span class="n">index_service_client_v1</span><span class="p">,</span>
    <span class="n">index_endpoint_service_client_v1</span><span class="p">,</span>
    <span class="n">job_service_client_v1</span><span class="p">,</span>
    <span class="n">metadata_service_client_v1</span><span class="p">,</span>
    <span class="n">model_garden_service_client_v1</span><span class="p">,</span>
    <span class="n">model_service_client_v1</span><span class="p">,</span>
    <span class="n">pipeline_service_client_v1</span><span class="p">,</span>
    <span class="n">prediction_service_client_v1</span><span class="p">,</span>
    <span class="n">prediction_service_async_client_v1</span><span class="p">,</span>
    <span class="n">schedule_service_client_v1</span><span class="p">,</span>
    <span class="n">tensorboard_service_client_v1</span><span class="p">,</span>
    <span class="n">vizier_service_client_v1</span><span class="p">,</span>
    <span class="n">persistent_resource_service_client_v1</span><span class="p">,</span>
<span class="p">)</span>

<span class="kn">from</span> <span class="nn">google.cloud.aiplatform.compat.types</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">accelerator_type</span> <span class="k">as</span> <span class="n">gca_accelerator_type</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">VertexAiServiceClient</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span>
    <span class="s2">&quot;VertexAiServiceClient&quot;</span><span class="p">,</span>
    <span class="c1"># v1beta1</span>
    <span class="n">dataset_service_client_v1beta1</span><span class="o">.</span><span class="n">DatasetServiceClient</span><span class="p">,</span>
    <span class="n">deployment_resource_pool_service_client_v1beta1</span><span class="o">.</span><span class="n">DeploymentResourcePoolServiceClient</span><span class="p">,</span>
    <span class="n">endpoint_service_client_v1beta1</span><span class="o">.</span><span class="n">EndpointServiceClient</span><span class="p">,</span>
    <span class="n">feature_online_store_admin_service_client_v1beta1</span><span class="o">.</span><span class="n">FeatureOnlineStoreAdminServiceClient</span><span class="p">,</span>
    <span class="n">feature_online_store_service_client_v1beta1</span><span class="o">.</span><span class="n">FeatureOnlineStoreServiceClient</span><span class="p">,</span>
    <span class="n">featurestore_online_serving_service_client_v1beta1</span><span class="o">.</span><span class="n">FeaturestoreOnlineServingServiceClient</span><span class="p">,</span>
    <span class="n">featurestore_service_client_v1beta1</span><span class="o">.</span><span class="n">FeaturestoreServiceClient</span><span class="p">,</span>
    <span class="n">index_service_client_v1beta1</span><span class="o">.</span><span class="n">IndexServiceClient</span><span class="p">,</span>
    <span class="n">index_endpoint_service_client_v1beta1</span><span class="o">.</span><span class="n">IndexEndpointServiceClient</span><span class="p">,</span>
    <span class="n">model_service_client_v1beta1</span><span class="o">.</span><span class="n">ModelServiceClient</span><span class="p">,</span>
    <span class="n">model_monitoring_service_client_v1beta1</span><span class="o">.</span><span class="n">ModelMonitoringServiceClient</span><span class="p">,</span>
    <span class="n">prediction_service_client_v1beta1</span><span class="o">.</span><span class="n">PredictionServiceClient</span><span class="p">,</span>
    <span class="n">prediction_service_async_client_v1beta1</span><span class="o">.</span><span class="n">PredictionServiceAsyncClient</span><span class="p">,</span>
    <span class="n">pipeline_service_client_v1beta1</span><span class="o">.</span><span class="n">PipelineServiceClient</span><span class="p">,</span>
    <span class="n">job_service_client_v1beta1</span><span class="o">.</span><span class="n">JobServiceClient</span><span class="p">,</span>
    <span class="n">match_service_client_v1beta1</span><span class="o">.</span><span class="n">MatchServiceClient</span><span class="p">,</span>
    <span class="n">metadata_service_client_v1beta1</span><span class="o">.</span><span class="n">MetadataServiceClient</span><span class="p">,</span>
    <span class="n">schedule_service_client_v1beta1</span><span class="o">.</span><span class="n">ScheduleServiceClient</span><span class="p">,</span>
    <span class="n">tensorboard_service_client_v1beta1</span><span class="o">.</span><span class="n">TensorboardServiceClient</span><span class="p">,</span>
    <span class="n">vizier_service_client_v1beta1</span><span class="o">.</span><span class="n">VizierServiceClient</span><span class="p">,</span>
    <span class="c1"># v1</span>
    <span class="n">dataset_service_client_v1</span><span class="o">.</span><span class="n">DatasetServiceClient</span><span class="p">,</span>
    <span class="n">endpoint_service_client_v1</span><span class="o">.</span><span class="n">EndpointServiceClient</span><span class="p">,</span>
    <span class="n">feature_online_store_admin_service_client_v1</span><span class="o">.</span><span class="n">FeatureOnlineStoreAdminServiceClient</span><span class="p">,</span>
    <span class="n">feature_online_store_service_client_v1</span><span class="o">.</span><span class="n">FeatureOnlineStoreServiceClient</span><span class="p">,</span>
    <span class="n">featurestore_online_serving_service_client_v1</span><span class="o">.</span><span class="n">FeaturestoreOnlineServingServiceClient</span><span class="p">,</span>
    <span class="n">featurestore_service_client_v1</span><span class="o">.</span><span class="n">FeaturestoreServiceClient</span><span class="p">,</span>
    <span class="n">metadata_service_client_v1</span><span class="o">.</span><span class="n">MetadataServiceClient</span><span class="p">,</span>
    <span class="n">model_service_client_v1</span><span class="o">.</span><span class="n">ModelServiceClient</span><span class="p">,</span>
    <span class="n">prediction_service_client_v1</span><span class="o">.</span><span class="n">PredictionServiceClient</span><span class="p">,</span>
    <span class="n">prediction_service_async_client_v1</span><span class="o">.</span><span class="n">PredictionServiceAsyncClient</span><span class="p">,</span>
    <span class="n">pipeline_service_client_v1</span><span class="o">.</span><span class="n">PipelineServiceClient</span><span class="p">,</span>
    <span class="n">job_service_client_v1</span><span class="o">.</span><span class="n">JobServiceClient</span><span class="p">,</span>
    <span class="n">schedule_service_client_v1</span><span class="o">.</span><span class="n">ScheduleServiceClient</span><span class="p">,</span>
    <span class="n">tensorboard_service_client_v1</span><span class="o">.</span><span class="n">TensorboardServiceClient</span><span class="p">,</span>
    <span class="n">vizier_service_client_v1</span><span class="o">.</span><span class="n">VizierServiceClient</span><span class="p">,</span>
<span class="p">)</span>


<span class="n">RESOURCE_ID_PATTERN</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^[\w-]+$&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">validate_id</span><span class="p">(</span><span class="n">resource_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate resource ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        resource_id (str): Resource id.</span>
<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If resource id is not a valid format.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">RESOURCE_ID_PATTERN</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">resource_id</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Resource </span><span class="si">{</span><span class="n">resource_id</span><span class="si">}</span><span class="s2"> is not a valid resource id.&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">full_resource_name</span><span class="p">(</span>
    <span class="n">resource_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">resource_noun</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">parse_resource_name_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span>
    <span class="n">format_resource_name_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="n">parent_resource_name_fields</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">project</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">location</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">resource_id_validator</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns fully qualified resource name.</span>

<span class="sd">    Args:</span>
<span class="sd">        resource_name (str):</span>
<span class="sd">            Required. A fully-qualified Vertex AI resource name or</span>
<span class="sd">            resource ID.</span>
<span class="sd">        resource_noun (str):</span>
<span class="sd">            Required. A resource noun to validate the resource name against.</span>
<span class="sd">            For example, you would pass &quot;datasets&quot; to validate</span>
<span class="sd">            &quot;projects/123/locations/us-central1/datasets/456&quot;.</span>
<span class="sd">        parse_resource_name_method (Callable[[str], Dict[str,str]]):</span>
<span class="sd">            Required. Method that parses a resource name into its segment parts.</span>
<span class="sd">            These are generally included with GAPIC clients.</span>
<span class="sd">        format_resource_name_method (Callable[..., str]):</span>
<span class="sd">            Required. Method that takes segment parts of resource names and returns</span>
<span class="sd">            the formated resource name. These are generally included with GAPIC clients.</span>
<span class="sd">        parent_resource_name_fields (Dict[str, str]):</span>
<span class="sd">            Optional. Dictionary of segment parts where key is the resource noun and</span>
<span class="sd">            values are the resource ids.</span>
<span class="sd">            For example:</span>
<span class="sd">                {</span>
<span class="sd">                    &quot;metadataStores&quot;: &quot;123&quot;</span>
<span class="sd">                }</span>
<span class="sd">        project (str):</span>
<span class="sd">            Optional. project to retrieve resource_noun from. If not set, project</span>
<span class="sd">            set in aiplatform.init will be used.</span>
<span class="sd">        location (str):</span>
<span class="sd">            Optional. location to retrieve resource_noun from. If not set, location</span>
<span class="sd">            set in aiplatform.init will be used.</span>
<span class="sd">        resource_id_validator (Callable[str, None]):</span>
<span class="sd">            Optional. Function that validates the resource ID. Overrides the default validator, validate_id.</span>
<span class="sd">            Should take a resource ID as string and raise ValueError if invalid.</span>

<span class="sd">    Returns:</span>
<span class="sd">        resource_name (str):</span>
<span class="sd">            A fully-qualified Vertex AI resource name.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Fully qualified resource name, e.g., &quot;projects/.../locations/.../datasets/12345&quot; or</span>
    <span class="c1"># &quot;projects/.../locations/.../metadataStores/.../contexts/12345&quot;</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="n">parse_resource_name_method</span><span class="p">(</span><span class="n">resource_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">fields</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">resource_name</span>

    <span class="n">resource_id_validator</span> <span class="o">=</span> <span class="n">resource_id_validator</span> <span class="ow">or</span> <span class="n">validate_id</span>

    <span class="n">user_project</span> <span class="o">=</span> <span class="n">project</span> <span class="ow">or</span> <span class="n">initializer</span><span class="o">.</span><span class="n">global_config</span><span class="o">.</span><span class="n">project</span>
    <span class="n">user_location</span> <span class="o">=</span> <span class="n">location</span> <span class="ow">or</span> <span class="n">initializer</span><span class="o">.</span><span class="n">global_config</span><span class="o">.</span><span class="n">location</span>

    <span class="n">validate_region</span><span class="p">(</span><span class="n">user_location</span><span class="p">)</span>
    <span class="n">resource_id_validator</span><span class="p">(</span><span class="n">resource_name</span><span class="p">)</span>

    <span class="n">format_args</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;location&quot;</span><span class="p">:</span> <span class="n">user_location</span><span class="p">,</span>
        <span class="s2">&quot;project&quot;</span><span class="p">:</span> <span class="n">user_project</span><span class="p">,</span>
        <span class="n">convert_camel_case_resource_noun_to_snake_case</span><span class="p">(</span><span class="n">resource_noun</span><span class="p">):</span> <span class="n">resource_name</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">parent_resource_name_fields</span><span class="p">:</span>
        <span class="n">format_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="n">convert_camel_case_resource_noun_to_snake_case</span><span class="p">(</span><span class="n">key</span><span class="p">):</span> <span class="n">value</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">parent_resource_name_fields</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">format_resource_name_method</span><span class="p">(</span><span class="o">**</span><span class="n">format_args</span><span class="p">)</span>


<span class="c1"># Resource nouns that are not plural in their resource names.</span>
<span class="c1"># Userd below to avoid conversion from plural to singular.</span>
<span class="n">_SINGULAR_RESOURCE_NOUNS</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;time_series&quot;</span><span class="p">}</span>
<span class="n">_SINGULAR_RESOURCE_NOUNS_MAP</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;indexes&quot;</span><span class="p">:</span> <span class="s2">&quot;index&quot;</span><span class="p">}</span>


<span class="k">def</span> <span class="nf">convert_camel_case_resource_noun_to_snake_case</span><span class="p">(</span><span class="n">resource_noun</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Converts camel case to snake case to map resource name parts to GAPIC parameter names.</span>

<span class="sd">    Args:</span>
<span class="sd">        resource_noun (str): The resource noun in camel case to covert.</span>
<span class="sd">    Returns:</span>
<span class="sd">        Singular snake case resource noun.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">snake_case</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;([A-Z]+)&quot;</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;_\1&quot;</span><span class="p">,</span> <span class="n">resource_noun</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="c1"># plural to singular</span>
    <span class="k">if</span> <span class="n">snake_case</span> <span class="ow">in</span> <span class="n">_SINGULAR_RESOURCE_NOUNS</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">snake_case</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">snake_case</span>
    <span class="k">elif</span> <span class="n">snake_case</span> <span class="ow">in</span> <span class="n">_SINGULAR_RESOURCE_NOUNS_MAP</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">_SINGULAR_RESOURCE_NOUNS_MAP</span><span class="p">[</span><span class="n">snake_case</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">snake_case</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">validate_display_name</span><span class="p">(</span><span class="n">display_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify display name is at most 128 chars.</span>

<span class="sd">    Args:</span>
<span class="sd">        display_name: display name to verify</span>
<span class="sd">    Raises:</span>
<span class="sd">        ValueError: display name is longer than 128 characters</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">display_name</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">128</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Display name needs to be less than 128 characters.&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">validate_labels</span><span class="p">(</span><span class="n">labels</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate labels.</span>

<span class="sd">    Args:</span>
<span class="sd">        labels: labels to verify</span>
<span class="sd">    Raises:</span>
<span class="sd">        ValueError: if labels is not a mapping of string key value pairs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">labels</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Expect labels to be a mapping of string key value pairs. &quot;</span>
                <span class="s1">&#39;Got &quot;</span><span class="si">{}</span><span class="s1">&quot;.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
            <span class="p">)</span>


<span class="k">def</span> <span class="nf">validate_region</span><span class="p">(</span><span class="n">region</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validates region against supported regions.</span>

<span class="sd">    Args:</span>
<span class="sd">        region: region to validate</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: True if no errors raised</span>
<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If region is not in supported regions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">region</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Please provide a region, select from </span><span class="si">{</span><span class="n">constants</span><span class="o">.</span><span class="n">SUPPORTED_REGIONS</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="n">region</span> <span class="o">=</span> <span class="n">region</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">region</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">constants</span><span class="o">.</span><span class="n">SUPPORTED_REGIONS</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unsupported region for Vertex AI, select from </span><span class="si">{</span><span class="n">constants</span><span class="o">.</span><span class="n">SUPPORTED_REGIONS</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="kc">True</span>


<span class="k">def</span> <span class="nf">validate_accelerator_type</span><span class="p">(</span><span class="n">accelerator_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validates user provided accelerator_type string for training and</span>
<span class="sd">    prediction.</span>

<span class="sd">    Args:</span>
<span class="sd">        accelerator_type (str):</span>
<span class="sd">            Represents a hardware accelerator type.</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: True if valid accelerator_type</span>
<span class="sd">    Raises:</span>
<span class="sd">        ValueError if accelerator type is invalid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">accelerator_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">gca_accelerator_type</span><span class="o">.</span><span class="n">AcceleratorType</span><span class="o">.</span><span class="n">_member_names_</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Given accelerator_type `</span><span class="si">{</span><span class="n">accelerator_type</span><span class="si">}</span><span class="s2">` invalid. &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;Choose one of </span><span class="si">{</span><span class="n">gca_accelerator_type</span><span class="o">.</span><span class="n">AcceleratorType</span><span class="o">.</span><span class="n">_member_names_</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>


<span class="k">def</span> <span class="nf">extract_bucket_and_prefix_from_gcs_path</span><span class="p">(</span><span class="n">gcs_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Given a complete GCS path, return the bucket name and prefix as a tuple.</span>

<span class="sd">    Example Usage:</span>

<span class="sd">        bucket, prefix = extract_bucket_and_prefix_from_gcs_path(</span>
<span class="sd">            &quot;gs://example-bucket/path/to/folder&quot;</span>
<span class="sd">        )</span>

<span class="sd">        # bucket = &quot;example-bucket&quot;</span>
<span class="sd">        # prefix = &quot;path/to/folder&quot;</span>

<span class="sd">    Args:</span>
<span class="sd">        gcs_path (str):</span>
<span class="sd">            Required. A full path to a Google Cloud Storage folder or resource.</span>
<span class="sd">            Can optionally include &quot;gs://&quot; prefix or end in a trailing slash &quot;/&quot;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Tuple[str, Optional[str]]</span>
<span class="sd">            A (bucket, prefix) pair from provided GCS path. If a prefix is not</span>
<span class="sd">            present, a None will be returned in its place.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">gcs_path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;gs://&quot;</span><span class="p">):</span>
        <span class="n">gcs_path</span> <span class="o">=</span> <span class="n">gcs_path</span><span class="p">[</span><span class="mi">5</span><span class="p">:]</span>
    <span class="k">if</span> <span class="n">gcs_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">):</span>
        <span class="n">gcs_path</span> <span class="o">=</span> <span class="n">gcs_path</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="n">gcs_parts</span> <span class="o">=</span> <span class="n">gcs_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">gcs_bucket</span> <span class="o">=</span> <span class="n">gcs_parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">gcs_blob_prefix</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gcs_parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">gcs_parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">gcs_bucket</span><span class="p">,</span> <span class="n">gcs_blob_prefix</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">extract_project_and_location_from_parent</span><span class="p">(</span>
    <span class="n">parent</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Given a complete parent resource name, return the project and location as a dict.</span>

<span class="sd">    Example Usage:</span>

<span class="sd">        parent_resources = extract_project_and_location_from_parent(</span>
<span class="sd">            &quot;projects/123/locations/us-central1/datasets/456&quot;</span>
<span class="sd">        )</span>

<span class="sd">        parent_resources[&quot;project&quot;] = &quot;123&quot;</span>
<span class="sd">        parent_resources[&quot;location&quot;] = &quot;us-central1&quot;</span>

<span class="sd">    Args:</span>
<span class="sd">        parent (str):</span>
<span class="sd">            Required. A complete parent resource name.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict[str, str]</span>
<span class="sd">            A project, location dict from provided parent resource name.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parent_resources</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
        <span class="sa">r</span><span class="s2">&quot;^projects/(?P&lt;project&gt;.+?)/locations/(?P&lt;location&gt;.+?)(/|$)&quot;</span><span class="p">,</span> <span class="n">parent</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">parent_resources</span><span class="o">.</span><span class="n">groupdict</span><span class="p">()</span> <span class="k">if</span> <span class="n">parent_resources</span> <span class="k">else</span> <span class="p">{}</span>


<span class="k">class</span> <span class="nc">ClientWithOverride</span><span class="p">:</span>
    <span class="k">class</span> <span class="nc">WrappedClient</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Wrapper class for client that creates client at API invocation</span>
<span class="sd">        time.&quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">client_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">VertexAiServiceClient</span><span class="p">],</span>
            <span class="n">client_options</span><span class="p">:</span> <span class="n">client_options</span><span class="o">.</span><span class="n">ClientOptions</span><span class="p">,</span>
            <span class="n">client_info</span><span class="p">:</span> <span class="n">gapic_v1</span><span class="o">.</span><span class="n">client_info</span><span class="o">.</span><span class="n">ClientInfo</span><span class="p">,</span>
            <span class="n">credentials</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">auth_credentials</span><span class="o">.</span><span class="n">Credentials</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">transport</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Stores parameters needed to instantiate client.</span>

<span class="sd">            Args:</span>
<span class="sd">                client_class (VertexAiServiceClient):</span>
<span class="sd">                    Required. Class of the client to use.</span>
<span class="sd">                client_options (client_options.ClientOptions):</span>
<span class="sd">                    Required. Client options to pass to client.</span>
<span class="sd">                client_info (gapic_v1.client_info.ClientInfo):</span>
<span class="sd">                    Required. Client info to pass to client.</span>
<span class="sd">                credentials (auth_credentials.credentials):</span>
<span class="sd">                    Optional. Client credentials to pass to client.</span>
<span class="sd">                transport (str):</span>
<span class="sd">                    Optional. Transport type to pass to client.</span>
<span class="sd">                    NOTE: &quot;rest&quot; transport functionality is currently in a</span>
<span class="sd">                    beta state (preview).</span>
<span class="sd">            &quot;&quot;&quot;</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_client_class</span> <span class="o">=</span> <span class="n">client_class</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_credentials</span> <span class="o">=</span> <span class="n">credentials</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_client_options</span> <span class="o">=</span> <span class="n">client_options</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_client_info</span> <span class="o">=</span> <span class="n">client_info</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_api_transport</span> <span class="o">=</span> <span class="n">transport</span>

        <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Instantiates client and returns attribute of the client.&quot;&quot;&quot;</span>

            <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
                <span class="n">credentials</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_credentials</span><span class="p">,</span>
                <span class="n">client_options</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_client_options</span><span class="p">,</span>
                <span class="n">client_info</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_client_info</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_api_transport</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;transport&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_api_transport</span>

            <span class="n">temporary_client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

            <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">temporary_client</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_is_temporary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="nd">@classmethod</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_default_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="nd">@classmethod</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">_version_map</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">api_endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Default API endpoint used by this client.&quot;&quot;&quot;</span>
        <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clients</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_default_version</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_temporary</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">client</span><span class="o">.</span><span class="n">_client_options</span><span class="o">.</span><span class="n">api_endpoint</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">client</span><span class="o">.</span><span class="n">_transport</span><span class="o">.</span><span class="n">_host</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">client_options</span><span class="p">:</span> <span class="n">client_options</span><span class="o">.</span><span class="n">ClientOptions</span><span class="p">,</span>
        <span class="n">client_info</span><span class="p">:</span> <span class="n">gapic_v1</span><span class="o">.</span><span class="n">client_info</span><span class="o">.</span><span class="n">ClientInfo</span><span class="p">,</span>
        <span class="n">credentials</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">auth_credentials</span><span class="o">.</span><span class="n">Credentials</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">transport</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stores parameters needed to instantiate client.</span>

<span class="sd">        Args:</span>
<span class="sd">            client_options (client_options.ClientOptions):</span>
<span class="sd">                Required. Client options to pass to client.</span>
<span class="sd">            client_info (gapic_v1.client_info.ClientInfo):</span>
<span class="sd">                Required. Client info to pass to client.</span>
<span class="sd">            credentials (auth_credentials.credentials):</span>
<span class="sd">                Optional. Client credentials to pass to client.</span>
<span class="sd">            transport (str):</span>
<span class="sd">                Optional. Transport type to pass to client.</span>
<span class="sd">                NOTE: &quot;rest&quot; transport functionality is currently in a</span>
<span class="sd">                beta state (preview).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">credentials</span><span class="o">=</span><span class="n">credentials</span><span class="p">,</span>
            <span class="n">client_options</span><span class="o">=</span><span class="n">client_options</span><span class="p">,</span>
            <span class="n">client_info</span><span class="o">=</span><span class="n">client_info</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">transport</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;transport&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">transport</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_clients</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">version</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">WrappedClient</span><span class="p">(</span>
                <span class="n">client_class</span><span class="o">=</span><span class="n">client_class</span><span class="p">,</span>
                <span class="n">client_options</span><span class="o">=</span><span class="n">client_options</span><span class="p">,</span>
                <span class="n">client_info</span><span class="o">=</span><span class="n">client_info</span><span class="p">,</span>
                <span class="n">credentials</span><span class="o">=</span><span class="n">credentials</span><span class="p">,</span>
                <span class="n">transport</span><span class="o">=</span><span class="n">transport</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_temporary</span>
            <span class="k">else</span> <span class="n">client_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">version</span><span class="p">,</span> <span class="n">client_class</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_version_map</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Instantiates client and returns attribute of the client.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_clients</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_default_version</span><span class="p">],</span> <span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">select_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">VertexAiServiceClient</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clients</span><span class="p">[</span><span class="n">version</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_gapic_client_class</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">version</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">VertexAiServiceClient</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the underyilng GAPIC client.</span>

<span class="sd">        Used to access class and static methods without instantiating.</span>

<span class="sd">        Args:</span>
<span class="sd">            version (str):</span>
<span class="sd">                Optional. Version of client to retreive otherwise the default version is returned.</span>
<span class="sd">        Retuns:</span>
<span class="sd">            Underlying GAPIC client for this wrapper and version.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_version_map</span><span class="p">)[</span><span class="n">version</span> <span class="ow">or</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_default_version</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">DatasetClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">DEFAULT_VERSION</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1</span><span class="p">,</span> <span class="n">dataset_service_client_v1</span><span class="o">.</span><span class="n">DatasetServiceClient</span><span class="p">),</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span> <span class="n">dataset_service_client_v1beta1</span><span class="o">.</span><span class="n">DatasetServiceClient</span><span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">DeploymentResourcePoolClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span>
            <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span>
            <span class="n">deployment_resource_pool_service_client_v1beta1</span><span class="o">.</span><span class="n">DeploymentResourcePoolServiceClient</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">EndpointClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">DEFAULT_VERSION</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1</span><span class="p">,</span> <span class="n">endpoint_service_client_v1</span><span class="o">.</span><span class="n">EndpointServiceClient</span><span class="p">),</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span> <span class="n">endpoint_service_client_v1beta1</span><span class="o">.</span><span class="n">EndpointServiceClient</span><span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">ExtensionExecutionClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span>
            <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span>
            <span class="n">extension_execution_service_client_v1beta1</span><span class="o">.</span><span class="n">ExtensionExecutionServiceClient</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">ExtensionRegistryClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span>
            <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span>
            <span class="n">extension_registry_service_client_v1beta1</span><span class="o">.</span><span class="n">ExtensionRegistryServiceClient</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">IndexClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">DEFAULT_VERSION</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1</span><span class="p">,</span> <span class="n">index_service_client_v1</span><span class="o">.</span><span class="n">IndexServiceClient</span><span class="p">),</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span> <span class="n">index_service_client_v1beta1</span><span class="o">.</span><span class="n">IndexServiceClient</span><span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">IndexEndpointClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">DEFAULT_VERSION</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1</span><span class="p">,</span> <span class="n">index_endpoint_service_client_v1</span><span class="o">.</span><span class="n">IndexEndpointServiceClient</span><span class="p">),</span>
        <span class="p">(</span>
            <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span>
            <span class="n">index_endpoint_service_client_v1beta1</span><span class="o">.</span><span class="n">IndexEndpointServiceClient</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">FeatureOnlineStoreAdminClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">DEFAULT_VERSION</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span>
            <span class="n">compat</span><span class="o">.</span><span class="n">V1</span><span class="p">,</span>
            <span class="n">feature_online_store_admin_service_client_v1</span><span class="o">.</span><span class="n">FeatureOnlineStoreAdminServiceClient</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="p">(</span>
            <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span>
            <span class="n">feature_online_store_admin_service_client_v1beta1</span><span class="o">.</span><span class="n">FeatureOnlineStoreAdminServiceClient</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">FeatureOnlineStoreClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">DEFAULT_VERSION</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span>
            <span class="n">compat</span><span class="o">.</span><span class="n">V1</span><span class="p">,</span>
            <span class="n">feature_online_store_service_client_v1</span><span class="o">.</span><span class="n">FeatureOnlineStoreServiceClient</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="p">(</span>
            <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span>
            <span class="n">feature_online_store_service_client_v1beta1</span><span class="o">.</span><span class="n">FeatureOnlineStoreServiceClient</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">FeaturestoreClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">DEFAULT_VERSION</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1</span><span class="p">,</span> <span class="n">featurestore_service_client_v1</span><span class="o">.</span><span class="n">FeaturestoreServiceClient</span><span class="p">),</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span> <span class="n">featurestore_service_client_v1beta1</span><span class="o">.</span><span class="n">FeaturestoreServiceClient</span><span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">FeaturestoreOnlineServingClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">DEFAULT_VERSION</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span>
            <span class="n">compat</span><span class="o">.</span><span class="n">V1</span><span class="p">,</span>
            <span class="n">featurestore_online_serving_service_client_v1</span><span class="o">.</span><span class="n">FeaturestoreOnlineServingServiceClient</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="p">(</span>
            <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span>
            <span class="n">featurestore_online_serving_service_client_v1beta1</span><span class="o">.</span><span class="n">FeaturestoreOnlineServingServiceClient</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">JobClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">DEFAULT_VERSION</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1</span><span class="p">,</span> <span class="n">job_service_client_v1</span><span class="o">.</span><span class="n">JobServiceClient</span><span class="p">),</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span> <span class="n">job_service_client_v1beta1</span><span class="o">.</span><span class="n">JobServiceClient</span><span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">ModelClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">DEFAULT_VERSION</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1</span><span class="p">,</span> <span class="n">model_service_client_v1</span><span class="o">.</span><span class="n">ModelServiceClient</span><span class="p">),</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span> <span class="n">model_service_client_v1beta1</span><span class="o">.</span><span class="n">ModelServiceClient</span><span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">PipelineClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">DEFAULT_VERSION</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1</span><span class="p">,</span> <span class="n">pipeline_service_client_v1</span><span class="o">.</span><span class="n">PipelineServiceClient</span><span class="p">),</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span> <span class="n">pipeline_service_client_v1beta1</span><span class="o">.</span><span class="n">PipelineServiceClient</span><span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">PipelineJobClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">DEFAULT_VERSION</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1</span><span class="p">,</span> <span class="n">pipeline_service_client_v1</span><span class="o">.</span><span class="n">PipelineServiceClient</span><span class="p">),</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span> <span class="n">pipeline_service_client_v1beta1</span><span class="o">.</span><span class="n">PipelineServiceClient</span><span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">ScheduleClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">DEFAULT_VERSION</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1</span><span class="p">,</span> <span class="n">schedule_service_client_v1</span><span class="o">.</span><span class="n">ScheduleServiceClient</span><span class="p">),</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span> <span class="n">schedule_service_client_v1beta1</span><span class="o">.</span><span class="n">ScheduleServiceClient</span><span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">PredictionClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">DEFAULT_VERSION</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1</span><span class="p">,</span> <span class="n">prediction_service_client_v1</span><span class="o">.</span><span class="n">PredictionServiceClient</span><span class="p">),</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span> <span class="n">prediction_service_client_v1beta1</span><span class="o">.</span><span class="n">PredictionServiceClient</span><span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">PredictionAsyncClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">DEFAULT_VERSION</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1</span><span class="p">,</span> <span class="n">prediction_service_async_client_v1</span><span class="o">.</span><span class="n">PredictionServiceAsyncClient</span><span class="p">),</span>
        <span class="p">(</span>
            <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span>
            <span class="n">prediction_service_async_client_v1beta1</span><span class="o">.</span><span class="n">PredictionServiceAsyncClient</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">MatchClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">((</span><span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span> <span class="n">match_service_client_v1beta1</span><span class="o">.</span><span class="n">MatchServiceClient</span><span class="p">),)</span>


<span class="k">class</span> <span class="nc">MetadataClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">DEFAULT_VERSION</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1</span><span class="p">,</span> <span class="n">metadata_service_client_v1</span><span class="o">.</span><span class="n">MetadataServiceClient</span><span class="p">),</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span> <span class="n">metadata_service_client_v1beta1</span><span class="o">.</span><span class="n">MetadataServiceClient</span><span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">ModelMonitoringClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span>
            <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span>
            <span class="n">model_monitoring_service_client_v1beta1</span><span class="o">.</span><span class="n">ModelMonitoringServiceClient</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">TensorboardClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">DEFAULT_VERSION</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1</span><span class="p">,</span> <span class="n">tensorboard_service_client_v1</span><span class="o">.</span><span class="n">TensorboardServiceClient</span><span class="p">),</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span> <span class="n">tensorboard_service_client_v1beta1</span><span class="o">.</span><span class="n">TensorboardServiceClient</span><span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">VizierClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">DEFAULT_VERSION</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1</span><span class="p">,</span> <span class="n">vizier_service_client_v1</span><span class="o">.</span><span class="n">VizierServiceClient</span><span class="p">),</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span> <span class="n">vizier_service_client_v1beta1</span><span class="o">.</span><span class="n">VizierServiceClient</span><span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">ModelGardenClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">DEFAULT_VERSION</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1</span><span class="p">,</span> <span class="n">model_garden_service_client_v1</span><span class="o">.</span><span class="n">ModelGardenServiceClient</span><span class="p">),</span>
        <span class="p">(</span><span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span> <span class="n">model_garden_service_client_v1beta1</span><span class="o">.</span><span class="n">ModelGardenServiceClient</span><span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">PersistentResourceClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">DEFAULT_VERSION</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span>
            <span class="n">compat</span><span class="o">.</span><span class="n">V1</span><span class="p">,</span>
            <span class="n">persistent_resource_service_client_v1</span><span class="o">.</span><span class="n">PersistentResourceServiceClient</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="p">(</span>
            <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span>
            <span class="n">persistent_resource_service_client_v1beta1</span><span class="o">.</span><span class="n">PersistentResourceServiceClient</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">ReasoningEngineClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span>
            <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span>
            <span class="n">reasoning_engine_service_client_v1beta1</span><span class="o">.</span><span class="n">ReasoningEngineServiceClient</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">ReasoningEngineExecutionClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span>
            <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span>
            <span class="n">reasoning_engine_execution_service_client_v1beta1</span><span class="o">.</span><span class="n">ReasoningEngineExecutionServiceClient</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">VertexRagDataClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span>
            <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span>
            <span class="n">vertex_rag_data_service_client_v1beta1</span><span class="o">.</span><span class="n">VertexRagDataServiceClient</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">VertexRagDataAsyncClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span>
            <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span>
            <span class="n">vertex_rag_data_service_async_client_v1beta1</span><span class="o">.</span><span class="n">VertexRagDataServiceAsyncClient</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">VertexRagClientWithOverride</span><span class="p">(</span><span class="n">ClientWithOverride</span><span class="p">):</span>
    <span class="n">_is_temporary</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">_default_version</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span>
    <span class="n">_version_map</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span>
            <span class="n">compat</span><span class="o">.</span><span class="n">V1BETA1</span><span class="p">,</span>
            <span class="n">vertex_rag_service_client_v1beta1</span><span class="o">.</span><span class="n">VertexRagServiceClient</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>


<span class="n">VertexAiServiceClientWithOverride</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span>
    <span class="s2">&quot;VertexAiServiceClientWithOverride&quot;</span><span class="p">,</span>
    <span class="n">DatasetClientWithOverride</span><span class="p">,</span>
    <span class="n">EndpointClientWithOverride</span><span class="p">,</span>
    <span class="n">FeaturestoreClientWithOverride</span><span class="p">,</span>
    <span class="n">JobClientWithOverride</span><span class="p">,</span>
    <span class="n">ModelClientWithOverride</span><span class="p">,</span>
    <span class="n">MatchClientWithOverride</span><span class="p">,</span>
    <span class="n">PipelineClientWithOverride</span><span class="p">,</span>
    <span class="n">PipelineJobClientWithOverride</span><span class="p">,</span>
    <span class="n">PredictionClientWithOverride</span><span class="p">,</span>
    <span class="n">MetadataClientWithOverride</span><span class="p">,</span>
    <span class="n">ScheduleClientWithOverride</span><span class="p">,</span>
    <span class="n">TensorboardClientWithOverride</span><span class="p">,</span>
    <span class="n">VizierClientWithOverride</span><span class="p">,</span>
    <span class="n">ModelGardenClientWithOverride</span><span class="p">,</span>
    <span class="n">PersistentResourceClientWithOverride</span><span class="p">,</span>
    <span class="n">ReasoningEngineClientWithOverride</span><span class="p">,</span>
    <span class="n">ReasoningEngineExecutionClientWithOverride</span><span class="p">,</span>
    <span class="n">ModelMonitoringClientWithOverride</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">LoggingFilter</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">Filter</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">warning_level</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_warning_level</span> <span class="o">=</span> <span class="n">warning_level</span>

    <span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">record</span><span class="o">.</span><span class="n">levelname</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_warning_level</span>


<span class="k">def</span> <span class="nf">_timestamped_gcs_dir</span><span class="p">(</span><span class="n">root_gcs_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">dir_name_prefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Composes a timestamped GCS directory.</span>

<span class="sd">    Args:</span>
<span class="sd">        root_gcs_path: GCS path to put the timestamped directory.</span>
<span class="sd">        dir_name_prefix: Prefix to add the timestamped directory.</span>
<span class="sd">    Returns:</span>
<span class="sd">        Timestamped gcs directory path in root_gcs_path.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(</span><span class="n">sep</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="n">timespec</span><span class="o">=</span><span class="s2">&quot;milliseconds&quot;</span><span class="p">)</span>
    <span class="n">dir_name</span> <span class="o">=</span> <span class="s2">&quot;-&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">dir_name_prefix</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">root_gcs_path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">):</span>
        <span class="n">root_gcs_path</span> <span class="o">=</span> <span class="n">root_gcs_path</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">gcs_path</span> <span class="o">=</span> <span class="s2">&quot;/&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">root_gcs_path</span><span class="p">,</span> <span class="n">dir_name</span><span class="p">])</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">gcs_path</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;gs://&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;gs://&quot;</span> <span class="o">+</span> <span class="n">gcs_path</span>
    <span class="k">return</span> <span class="n">gcs_path</span>


<span class="k">def</span> <span class="nf">_timestamped_copy_to_gcs</span><span class="p">(</span>
    <span class="n">local_file_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">gcs_dir</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">project</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">credentials</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">auth_credentials</span><span class="o">.</span><span class="n">Credentials</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Copies a local file to a GCS path.</span>

<span class="sd">    The file copied to GCS is the name of the local file prepended with an</span>
<span class="sd">    &quot;aiplatform-{timestamp}-&quot; string.</span>

<span class="sd">    Args:</span>
<span class="sd">        local_file_path (str): Required. Local file to copy to GCS.</span>
<span class="sd">        gcs_dir (str):</span>
<span class="sd">            Required. The GCS directory to copy to.</span>
<span class="sd">        project (str):</span>
<span class="sd">            Project that contains the staging bucket. Default will be used if not</span>
<span class="sd">            provided. Model Builder callers should pass this in.</span>
<span class="sd">        credentials (auth_credentials.Credentials):</span>
<span class="sd">            Custom credentials to use with bucket. Model Builder callers should pass</span>
<span class="sd">            this in.</span>
<span class="sd">    Returns:</span>
<span class="sd">        gcs_path (str): The path of the copied file in gcs.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">gcs_bucket</span><span class="p">,</span> <span class="n">gcs_blob_prefix</span> <span class="o">=</span> <span class="n">extract_bucket_and_prefix_from_gcs_path</span><span class="p">(</span><span class="n">gcs_dir</span><span class="p">)</span>

    <span class="n">local_file_name</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">local_file_path</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(</span><span class="n">sep</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="n">timespec</span><span class="o">=</span><span class="s2">&quot;milliseconds&quot;</span><span class="p">)</span>
    <span class="n">blob_path</span> <span class="o">=</span> <span class="s2">&quot;-&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;aiplatform&quot;</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">local_file_name</span><span class="p">])</span>

    <span class="k">if</span> <span class="n">gcs_blob_prefix</span><span class="p">:</span>
        <span class="n">blob_path</span> <span class="o">=</span> <span class="s2">&quot;/&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">gcs_blob_prefix</span><span class="p">,</span> <span class="n">blob_path</span><span class="p">])</span>

    <span class="c1"># TODO(b/171202993) add user agent</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">storage</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span><span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">,</span> <span class="n">credentials</span><span class="o">=</span><span class="n">credentials</span><span class="p">)</span>
    <span class="n">bucket</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">bucket</span><span class="p">(</span><span class="n">gcs_bucket</span><span class="p">)</span>
    <span class="n">blob</span> <span class="o">=</span> <span class="n">bucket</span><span class="o">.</span><span class="n">blob</span><span class="p">(</span><span class="n">blob_path</span><span class="p">)</span>
    <span class="n">blob</span><span class="o">.</span><span class="n">upload_from_filename</span><span class="p">(</span><span class="n">local_file_path</span><span class="p">)</span>

    <span class="n">gcs_path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;gs://&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">blob</span><span class="o">.</span><span class="n">bucket</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">blob</span><span class="o">.</span><span class="n">name</span><span class="p">])])</span>
    <span class="k">return</span> <span class="n">gcs_path</span>


<span class="k">def</span> <span class="nf">get_timestamp_proto</span><span class="p">(</span>
    <span class="n">time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">timestamp_pb2</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets timestamp proto of a given time.</span>
<span class="sd">    Args:</span>
<span class="sd">        time (datetime.datetime):</span>
<span class="sd">            Optional. A user provided time. Default to datetime.datetime.now() if not given.</span>
<span class="sd">    Returns:</span>
<span class="sd">        timestamp_pb2.Timestamp: timestamp proto of the given time, not have higher than millisecond precision.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">time</span><span class="p">:</span>
        <span class="n">time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

    <span class="n">time_str</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(</span><span class="n">sep</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">timespec</span><span class="o">=</span><span class="s2">&quot;milliseconds&quot;</span><span class="p">)</span>
    <span class="n">time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">time_str</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S.</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">timestamp_proto</span> <span class="o">=</span> <span class="n">timestamp_pb2</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">()</span>
    <span class="n">timestamp_proto</span><span class="o">.</span><span class="n">FromDatetime</span><span class="p">(</span><span class="n">time</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">timestamp_proto</span>


<span class="k">def</span> <span class="nf">timestamped_unique_name</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Composes a timestamped unique name.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A string representing a unique name.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">-%H-%M-%S&quot;</span><span class="p">)</span>
    <span class="n">unique_id</span> <span class="o">=</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">unique_id</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../index.html">google-cloud-aiplatform</a></h1>



<p class="blurb">Google Cloud Client Libraries for google-cloud-aiplatform</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=googleapis&repo=python-aiplatform&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../vertexai/services.html">Vertex AI SDK</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../index.html">Documentation overview</a><ul>
  <li><a href="../../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2019, Google.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 5.0.2</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
    </div>

    
    <a href="https://github.com/googleapis/python-aiplatform" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://github.blog/wp-content/uploads/2008/12/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>